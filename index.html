<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K√°v√©fogyaszt√°s √©s Eg√©szs√©g Vizualiz√°ci√≥</title>
    <!-- Vega / Vega-Lite / vega-embed (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>‚òï A K√°v√© Titka</h1>
        <p class="subtitle-main">Eg√©szs√©g vagy kock√°zat? Adatvez√©relt elemz√©s 10,000 k√°v√©fogyaszt√≥ √©let√©r≈ël</p>
        <div class="divider"></div>

        <!-- Intro Section -->
        <section class="intro-section">
            <h2>üéØ Mi√©rt fontos ez?</h2>
            <p class="intro-text">
                A k√°v√© a vil√°g m√°sodik legkereskedettebb nyersanyaga az olaj ut√°n. Naponta t√∂bb mint 2 milli√°rd cs√©sze
                fogy el vil√°gszerte.
                De vajon eg√©szs√©ges ez a szok√°s? Hogyan befoly√°solja alv√°sunkat, stressz szint√ºnket √©s √°ltal√°nos
                j√≥ll√©t√ºnket?
            </p>
            <p class="intro-text">
                Ez az interakt√≠v elemz√©s <strong>10,000 szem√©ly val√≥s adatain</strong> kereszt√ºl t√°rja fel a
                k√°v√©fogyaszt√°s √©s az eg√©szs√©g √∂sszef√ºgg√©seit.

            </p>
        </section>



        <!-- Data Story -->
        <div class="chart-container">
            <h2 class="chart-section-title">1. Ki a k√°v√©fogyaszt√≥? ‚Äì Demogr√°fiai profil</h2>
            <p class="chart-description">
                Az √°tlagos napi k√°v√©fogyaszt√°s <strong>koroszt√°ly √©s nem szerinti</strong> bont√°sban. A diagram
                √∂t koroszt√°lyt (18-29, 30-39, 40-49, 50-59, 60+) mutat, k√ºl√∂nv√°lasztva a f√©rfi √©s n≈ëi fogyaszt√≥kat.
                Minden oszlop az adott csoport √°tlagos napi cs√©szesz√°m√°t jelzi.
            </p>
            <div id="chart1"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> A diagram alapj√°n l√°that√≥, hogy a 40-49 √©ves
                koroszt√°ly iszik a legt√∂bb k√°v√©t √°tlagosan, √©s √°ltal√°ban a f√©rfiak fogyasztanak valamivel t√∂bbet minden
                koroszt√°lyban.</p>

            <h2 class="chart-section-title">2. Glob√°lis k√°v√©fogyaszt√°si t√©rk√©p ‚Äì Orsz√°gok √∂sszehasonl√≠t√°sa</h2>
            <p class="chart-description">
                A <strong>top 15 orsz√°g</strong> √°tlagos napi k√°v√©fogyaszt√°sa cs√©sze/nap egys√©gben. Az oszlopdiagram
                cs√∂kken≈ë sorrendben mutatja az orsz√°gokat, √≠gy gyorsan l√°tszik, mely nemzetek fogyasztanak legink√°bb
                k√°v√©t.
            </p>
            <div id="chart2"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> A legjobb 15 orsz√°g k√∂z√∂tt az √°tlagos fogyaszt√°s
                2.8-3.2 cs√©sze/nap k√∂r√ºl mozog, de van√°k kisebb elt√©r√©sek a kultur√°lis szok√°sok miatt.</p>

            <h2 class="chart-section-title">3. Az alv√°s √°ra ‚Äì Koffein hat√°sa az alv√°sra</h2>
            <p class="chart-description">
                A <strong>koffein (mg/nap) √©s az alv√°sid≈ë (√≥ra)</strong> k√∂z√∂tti kapcsolat
                <strong>s≈±r≈±s√©gt√©rk√©ppel</strong>
                (2D heatmap). 10,000 adatpontot v√∂dr√∂kbe (bins) soroltunk, √≠gy l√°that√≥ a leggyakoribb kombin√°ci√≥k.
                A s√∂t√©tebb bar√°t sz√≠nek t√∂bb embert jeleznek az adott koffein-alv√°s tartom√°nyban.
            </p>
            <div id="chart3"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> Vil√°gosan l√°that√≥ a negat√≠v trend: a magasabb koffein
                tartom√°nyok alacsonyabb alv√°sid≈ëvel p√°rosulnak. A legt√∂bb ember 200-400mg koffein √©s 6-7 √≥ra alv√°s k√∂r√ºl
                csoportosul.</p>

            <h2 class="chart-section-title">4. Stressz √©s fizikai aktivit√°s ‚Äì √âletm√≥d mintaz√°tok</h2>
            <p class="chart-description">
                Hogyan oszlik meg a <strong>stresszszint az akt√≠v √©s inakt√≠v</strong> emberek k√∂r√©ben? Ez a
                csoportos√≠tott
                oszlopdiagram h√°rom fizikai aktivit√°si kateg√≥ri√°t (Alacsony, K√∂zepes, Magas) √©s h√°rom stressz szintet
                (Low, Medium, High) mutat, √≠gy l√°that√≥ a k√©t v√°ltoz√≥ kapcsolata.
            </p>
            <div id="chart4"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> Mindk√©t alacsony √©s magas fizikai aktivit√°s√∫
                csoportokban a 'Low' stressz a leggyakoribb. Az akt√≠vabb emberek k√∂r√©ben viszont kevesebb a 'High'
                stressz≈±.</p>

            <h2 class="chart-section-title">5. K√°v√©fogyaszt√°s √©s alv√°smin≈ës√©g ‚Äì √ñsszef√ºgg√©sek</h2>
            <p class="chart-description">
                A <strong>k√°v√© mennyis√©ge</strong> befoly√°solja az alv√°smin≈ës√©get? N√©gy fogyaszt√°si kateg√≥ria
                (Kev√©s, K√∂zepes, Sok, Nagyon sok) √©s n√©gy alv√°smin≈ës√©gi szint (Excellent, Good, Fair, Poor) mutatja,
                hogy a magasabb k√°v√©fogyaszt√°s eset√©n cs√∂kken az 'Excellent' √©s n≈ë a 'Fair/Poor' el≈ëfordul√°s.
            </p>
            <div id="chart5"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> A 'Kev√©s' √©s 'K√∂zepes' k√°v√©fogyaszt√≥kn√°l t√∂bb az
                'Excellent'
                alv√°smin≈ës√©g. Ezzel szemben a 'Nagyon sok' k√°v√© mellett n≈ë a 'Fair' √©s 'Poor' ar√°nya.</p>

            <h2 class="chart-section-title">6. Eg√©szs√©g√ºgyi probl√©m√°k eloszl√°sa ‚Äì K√°v√©fogyaszt√°s hat√°sa</h2>
            <p class="chart-description">
                Van-e <strong>k√ºl√∂nbs√©g az eg√©szs√©g√ºgyi probl√©m√°k gyakoris√°g√°ban</strong> a keveset (<2 cs√©sze) √©s sokat
                    (4+ cs√©sze) k√°v√©zok k√∂z√∂tt? A <strong>csoportos√≠tott oszlopdiagram</strong> (grouped bar chart)
                    k√∂zvetlen√ºl egym√°s mell√© helyezi a k√©t csoportot minden eg√©szs√©gi kateg√≥ri√°n√°l - √≠gy azonnal l√°that√≥
                    a k√ºl√∂nbs√©g.
            </p>
            <div id="chart6"></div>
            <p class="chart-insight">üí° <strong>Insight:</strong> A 'None' kateg√≥ri√°ban a keveset k√°v√©z√≥kn√°l t√∂bb ember
                van,
                m√≠g a 'Mild' √©s 'Moderate' probl√©m√°k gyakoribbak a sokat iv√≥k k√∂r√©ben. A 'Severe' mindkett≈ën√©l ritka.
            </p>
        </div>

        <!-- Conclusion Section -->
        <section class="conclusion-section">
            <h2>üìå K√∂vetkeztet√©sek</h2>
            <div class="conclusion-box">
                <h3>‚úÖ Amit megtudtunk:</h3>
                <ul>
                    <li>A <strong>40-49 √©ves koroszt√°ly</strong> fogyasztja √°tlagosan a legt√∂bb k√°v√©t, √©s a f√©rfiak
                        minden koroszt√°lyban valamivel t√∂bbet isznak</li>
                    <li>A <strong>top 15 orsz√°gban</strong> 2.8-3.2 cs√©sze/nap k√∂z√∂tt alakul az √°tlagos fogyaszt√°s,
                        kisebb kultur√°lis elt√©r√©sekkel</li>
                    <li><strong>Er≈ës negat√≠v korrel√°ci√≥</strong> a koffein √©s alv√°sid≈ë k√∂z√∂tt - min√©l t√∂bb koffein,
                        ann√°l kevesebb alv√°s</li>
                    <li>Az <strong>akt√≠vabb emberek k√∂r√©ben kevesebb</strong> a magas stressz szint, f√ºggetlen√ºl az
                        aktivit√°s m√©rt√©k√©t≈ël</li>
                    <li>A <strong>magasabb k√°v√©fogyaszt√°s</strong> (6+ cs√©sze) mellett cs√∂kken az 'Excellent'
                        alv√°smin≈ës√©g √©s n≈ë a 'Fair/Poor' kateg√≥ria</li>
                    <li>A <strong>sokat k√°v√©z√≥k k√∂r√©ben</strong> (4+ cs√©sze) nagyobb ar√°nyban fordul el≈ë 'Mild' √©s
                        'Moderate' eg√©szs√©g√ºgyi probl√©ma</li>
                </ul>
            </div>
        </section>

        <!-- Technical Documentation -->
        <section class="tech-section">
            <h2>üîß Technikai h√°tt√©r</h2>
            <p class="tech-text">
                <strong>Adatforr√°s:</strong> Szintetikus k√°v√©fogyaszt√°si √©s eg√©szs√©g√ºgyi adatb√°zis, 10,000 rekord<br>
                <strong>Form√°tum:</strong> Tidy (sor alap√∫) CSV, oszlopok: ID, Age, Gender, Country, Coffee_Intake,
                Caffeine_mg, Sleep_Hours, stb.<br>
                <strong>Eszk√∂z√∂k:</strong> Vega-Lite 5.x interakt√≠v vizualiz√°ci√≥s library<br>
                <strong>Transzform√°ci√≥k:</strong> Age binning, aggregation (mean, count), Z-score standardiz√°ci√≥ (Chart
                4), regression (Chart 3)<br>
                <strong>K√≥d:</strong> <a href="https://github.com/yourusername/coffee-health-viz" target="_blank">GitHub
                    Repository</a>
            </p>
        </section>
    </div>



    <script>
        // 1) Demogr√°fiai √°ttekint√©s ‚Äì Ki iszik k√°v√©t?
        const spec1 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "K√°v√©fogyaszt√°s koroszt√°ly √©s nem szerint",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": 500,
            "height": 280,
            "background": "transparent",
            "transform": [
                { "calculate": "datum.Age < 30 ? '18-29' : datum.Age < 40 ? '30-39' : datum.Age < 50 ? '40-49' : datum.Age < 60 ? '50-59' : '60+'", "as": "age_group" },
                {
                    "aggregate": [{ "op": "mean", "field": "Coffee_Intake", "as": "avg_coffee" }],
                    "groupby": ["age_group", "Gender"]
                }
            ],
            "params": [{
                "name": "highlight",
                "select": { "type": "point", "on": "mouseover" }
            }],
            "mark": { "type": "bar", "cornerRadius": 4, "width": { "band": 0.9 }, "cursor": "pointer" },
            "encoding": {
                "x": {
                    "field": "age_group",
                    "type": "ordinal",
                    "title": "Koroszt√°ly",
                    "sort": ["18-29", "30-39", "40-49", "50-59", "60+"],
                    "axis": { "labelAngle": 0, "labelColor": "#444" }
                },
                "y": {
                    "field": "avg_coffee",
                    "type": "quantitative",
                    "title": "√Åtlag k√°v√©fogyaszt√°s (cs√©sze/nap)",
                    "axis": { "labelColor": "#444" }
                },
                "xOffset": { "field": "Gender" },
                "color": {
                    "field": "Gender",
                    "type": "nominal",
                    "scale": {
                        "domain": ["Male", "Female"],
                        "range": ["#6F4E37", "#BCAAA4"]
                    },
                    "legend": { "title": "Nem", "labelColor": "#444" }
                },
                "opacity": {
                    "condition": { "param": "highlight", "value": 1 },
                    "value": 0.7
                },
                "strokeWidth": {
                    "condition": { "param": "highlight", "value": 2 },
                    "value": 0
                },
                "tooltip": [
                    { "field": "Gender", "type": "nominal", "title": "Nem" },
                    { "field": "age_group", "type": "ordinal", "title": "Koroszt√°ly" },
                    { "field": "avg_coffee", "type": "quantitative", "title": "√Åtlag k√°v√©", "format": ".2f" }
                ]
            },
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // 2) Orsz√°gok √∂sszehasonl√≠t√°sa ‚Äì Column Chart
        const spec2 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "√Åtlagos k√°v√©fogyaszt√°s orsz√°gonk√©nt",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": "container",
            "height": 320,
            "background": "transparent",
            "transform": [
                {
                    "aggregate": [{ "op": "mean", "field": "Coffee_Intake", "as": "avg_coffee" }],
                    "groupby": ["Country"]
                },
                { "window": [{ "op": "rank", "as": "rank" }], "sort": [{ "field": "avg_coffee", "order": "descending" }] },
                { "filter": "datum.rank <= 15" }
            ],
            "mark": { "type": "bar", "cornerRadius": 4 },
            "encoding": {
                "x": {
                    "field": "Country",
                    "type": "nominal",
                    "sort": { "field": "avg_coffee", "order": "descending" },
                    "title": "Orsz√°g",
                    "axis": { "labelAngle": -45, "labelColor": "#444" }
                },
                "y": {
                    "field": "avg_coffee",
                    "type": "quantitative",
                    "title": "√Åtlagos k√°v√©fogyaszt√°s (cs√©sze/nap)",
                    "axis": { "labelColor": "#444" }
                },
                "color": {
                    "field": "avg_coffee",
                    "type": "quantitative",
                    "scale": {
                        "scheme": "browns",
                        "reverse": false
                    },
                    "legend": null
                },
                "tooltip": [
                    { "field": "Country", "type": "nominal", "title": "Orsz√°g" },
                    { "field": "avg_coffee", "type": "quantitative", "title": "√Åtlag cs√©sze/nap", "format": ".2f" },
                    { "field": "rank", "type": "quantitative", "title": "Helyez√©s" }
                ]
            },
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // 3) Koffein √©s alv√°s kapcsolata ‚Äì 2D Density Heatmap
        const spec3 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Koffeinbevitel √©s alv√°sid≈ë s≈±r≈±s√©gt√©rk√©pe",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": "container",
            "height": 280,
            "background": "transparent",
            "transform": [
                {
                    "bin": { "maxbins": 30 },
                    "field": "Caffeine_mg",
                    "as": "bin_caffeine"
                },
                {
                    "bin": { "maxbins": 20 },
                    "field": "Sleep_Hours",
                    "as": "bin_sleep"
                },
                {
                    "aggregate": [{ "op": "count", "as": "count" }],
                    "groupby": ["bin_caffeine", "bin_caffeine_end", "bin_sleep", "bin_sleep_end"]
                }
            ],
            "mark": { "type": "rect" },
            "encoding": {
                "x": {
                    "field": "bin_caffeine",
                    "type": "quantitative",
                    "bin": "binned",
                    "title": "Koffein (mg/nap)",
                    "axis": { "labelColor": "#444" }
                },
                "x2": { "field": "bin_caffeine_end" },
                "y": {
                    "field": "bin_sleep",
                    "type": "quantitative",
                    "bin": "binned",
                    "title": "Alv√°sid≈ë (√≥ra)",
                    "axis": { "labelColor": "#444" }
                },
                "y2": { "field": "bin_sleep_end" },
                "color": {
                    "field": "count",
                    "type": "quantitative",
                    "scale": { "scheme": "browns" },
                    "legend": { "title": "Emberek sz√°ma", "labelColor": "#444" }
                },
                "tooltip": [
                    { "field": "bin_caffeine", "type": "quantitative", "title": "Koffein t≈ël (mg)", "format": ".0f" },
                    { "field": "bin_caffeine_end", "type": "quantitative", "title": "Koffein-ig (mg)", "format": ".0f" },
                    { "field": "bin_sleep", "type": "quantitative", "title": "Alv√°s t≈ël (√≥ra)", "format": ".1f" },
                    { "field": "bin_sleep_end", "type": "quantitative", "title": "Alv√°s-ig (√≥ra)", "format": ".1f" },
                    { "field": "count", "type": "quantitative", "title": "Emberek sz√°ma" }
                ]
            },
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // 4) Stressz √©s fizikai aktivit√°s ‚Äì Grouped Bar Chart
        const spec4 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Stressz szint √©s fizikai aktivit√°s kapcsolata",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": "container",
            "height": 300,
            "background": "transparent",
            "transform": [
                { "filter": "datum.Physical_Activity_Hours > 0" },
                { "calculate": "datum.Physical_Activity_Hours < 5 ? 'Alacsony (0-5h)' : datum.Physical_Activity_Hours < 10 ? 'K√∂zepes (5-10h)' : 'Magas (10h+)'", "as": "activity_category" },
                {
                    "aggregate": [{ "op": "count", "as": "count" }],
                    "groupby": ["activity_category", "Stress_Level"]
                }
            ],
            "layer": [
                {
                    "mark": { "type": "bar", "cornerRadius": 4 },
                    "encoding": {
                        "x": {
                            "field": "activity_category",
                            "type": "ordinal",
                            "title": "Fizikai aktivit√°s szintje",
                            "sort": ["Alacsony (0-5h)", "K√∂zepes (5-10h)", "Magas (10h+)"],
                            "axis": { "labelAngle": -20, "labelColor": "#444" }
                        },
                        "y": {
                            "field": "count",
                            "type": "quantitative",
                            "title": "Emberek sz√°ma",
                            "axis": { "labelColor": "#444" }
                        },
                        "xOffset": { "field": "Stress_Level" },
                        "color": {
                            "field": "Stress_Level",
                            "type": "nominal",
                            "scale": {
                                "domain": ["Low", "Medium", "High"],
                                "range": ["#BCAAA4", "#8D6E63", "#5D4037"]
                            },
                            "legend": { "title": "Stressz szint", "labelColor": "#444" }
                        },
                        "tooltip": [
                            { "field": "activity_category", "type": "ordinal", "title": "Aktivit√°s" },
                            { "field": "Stress_Level", "type": "nominal", "title": "Stressz" },
                            { "field": "count", "type": "quantitative", "title": "Emberek sz√°ma" }
                        ]
                    }
                },
                {
                    "mark": { "type": "text", "dy": -5, "fontSize": 10, "color": "#3E2723" },
                    "encoding": {
                        "x": {
                            "field": "activity_category",
                            "type": "ordinal",
                            "sort": ["Alacsony (0-5h)", "K√∂zepes (5-10h)", "Magas (10h+)"]
                        },
                        "y": {
                            "field": "count",
                            "type": "quantitative"
                        },
                        "xOffset": { "field": "Stress_Level" },
                        "text": { "field": "count", "type": "quantitative" }
                    }
                }
            ],
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // 5) K√°v√©fogyaszt√°s √©s alv√°smin≈ës√©g ‚Äì Grouped Bar Chart
        const spec5 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "K√°v√©fogyaszt√°s √©s alv√°smin≈ës√©g",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": "container",
            "height": 280,
            "background": "transparent",
            "transform": [
                { "calculate": "datum.Coffee_Intake < 2 ? 'Kev√©s (0-2)' : datum.Coffee_Intake < 4 ? 'K√∂zepes (2-4)' : datum.Coffee_Intake < 6 ? 'Sok (4-6)' : 'Nagyon sok (6+)'", "as": "coffee_category" },
                {
                    "aggregate": [{ "op": "count", "as": "count" }],
                    "groupby": ["coffee_category", "Sleep_Quality"]
                }
            ],
            "mark": { "type": "bar", "cornerRadius": 4 },
            "encoding": {
                "x": {
                    "field": "coffee_category",
                    "type": "ordinal",
                    "title": "K√°v√©fogyaszt√°s (cs√©sze/nap)",
                    "sort": ["Kev√©s (0-2)", "K√∂zepes (2-4)", "Sok (4-6)", "Nagyon sok (6+)"],
                    "axis": { "labelAngle": -20, "labelColor": "#444" }
                },
                "y": {
                    "field": "count",
                    "type": "quantitative",
                    "title": "Emberek sz√°ma",
                    "axis": { "labelColor": "#444" }
                },
                "xOffset": { "field": "Sleep_Quality" },
                "color": {
                    "field": "Sleep_Quality",
                    "type": "ordinal",
                    "scale": {
                        "domain": ["Excellent", "Good", "Fair", "Poor"],
                        "range": ["#BCAAA4", "#A1887F", "#6F4E37", "#5D4037"]
                    },
                    "legend": { "title": "Alv√°smin≈ës√©g", "labelColor": "#444" }
                },
                "tooltip": [
                    { "field": "coffee_category", "type": "ordinal", "title": "K√°v√©fogyaszt√°s" },
                    { "field": "Sleep_Quality", "type": "ordinal", "title": "Alv√°smin≈ës√©g" },
                    { "field": "count", "type": "quantitative", "title": "Emberek sz√°ma" }
                ]
            },
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // 6) Eg√©szs√©g√ºgyi probl√©m√°k eloszl√°sa ‚Äì Grouped Bar Chart
        const spec6 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Eg√©szs√©g√ºgyi probl√©m√°k: Kev√©s vs Sok k√°v√©",
            "data": { "url": "synthetic_coffee_health_10000.csv" },
            "width": "container",
            "height": 300,
            "background": "transparent",
            "transform": [
                { "calculate": "datum.Coffee_Intake < 2 ? 'Kev√©s k√°v√© (<2)' : datum.Coffee_Intake >= 4 ? 'Sok k√°v√© (4+)' : null", "as": "coffee_category" },
                { "filter": "datum.coffee_category != null" },
                {
                    "aggregate": [{ "op": "count", "as": "count" }],
                    "groupby": ["coffee_category", "Health_Issues"]
                }
            ],
            "mark": { "type": "bar", "cornerRadius": 3 },
            "encoding": {
                "x": {
                    "field": "Health_Issues",
                    "type": "nominal",
                    "title": "Eg√©szs√©g√ºgyi probl√©ma szintje",
                    "sort": ["None", "Mild", "Moderate", "Severe"],
                    "axis": { "labelAngle": 0, "labelColor": "#444" }
                },
                "y": {
                    "field": "count",
                    "type": "quantitative",
                    "title": "Emberek sz√°ma",
                    "axis": { "labelColor": "#444" }
                },
                "xOffset": { "field": "coffee_category" },
                "color": {
                    "field": "coffee_category",
                    "type": "nominal",
                    "scale": {
                        "domain": ["Kev√©s k√°v√© (<2)", "Sok k√°v√© (4+)"],
                        "range": ["#BCAAA4", "#5D4037"]
                    },
                    "legend": { "title": "K√°v√©fogyaszt√°si kateg√≥ria", "labelColor": "#444" }
                },
                "tooltip": [
                    { "field": "Health_Issues", "type": "nominal", "title": "Eg√©szs√©gi √°llapot" },
                    { "field": "coffee_category", "type": "nominal", "title": "Kateg√≥ria" },
                    { "field": "count", "type": "quantitative", "title": "Emberek sz√°ma" }
                ]
            },
            "config": {
                "view": { "stroke": null },
                "axis": { "grid": false },
                "font": "Segoe UI, Tahoma, Geneva, Verdana, sans-serif"
            }
        };

        // Make the CTA button scroll to the chart container
        const btn = document.getElementById('get-started');
        if (btn) {
            btn.addEventListener('click', () => {
                const el = document.querySelector('.chart-container');
                if (el && el.scrollIntoView) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        }

        // Helper that embeds a Vega(-Lite) spec with a loading message
        function embedWithFallback(selector, spec) {
            const el = document.querySelector(selector);
            if (!el) return Promise.reject(new Error('Missing element: ' + selector));
            el.innerHTML = '<div style="padding:20px;color:#666">Vizualiz√°ci√≥ bet√∂lt√©se‚Ä¶</div>';

            return vegaEmbed(selector, spec, { actions: false })
                .catch(err => {
                    console.error('vegaEmbed error for', selector, err && err.message ? err.message : err);
                    el.innerHTML = '<div style="padding:16px;color:#c00">A vizualiz√°ci√≥ bet√∂lt√©se sikertelen. Ellen≈ërizd a konzolt.</div>';
                    return Promise.reject(err);
                });
        }

        // Embed all six charts
        embedWithFallback('#chart1', spec1).catch(() => { });
        embedWithFallback('#chart2', spec2).catch(() => { });
        embedWithFallback('#chart3', spec3).catch(() => { });
        embedWithFallback('#chart4', spec4).catch(() => { });
        embedWithFallback('#chart5', spec5).catch(() => { });
        embedWithFallback('#chart6', spec6).catch(() => { });

    </script>

</body>

</html>
